{
  "description": "Inferred data schema for daily-budget stored under localStorage key 'daily-budget-data'",
  "version": 1,
  "rootKey": "daily-budget-data",
  "entities": {
    "budget": {
      "type": "object",
      "properties": {
        "startAmount": { "type": "number" },
        "startDate": { "type": ["string", "null"], "format": "date-time", "description": "ISO date string or null" },
        "endDate": { "type": ["string", "null"], "format": "date-time", "description": "ISO date string or null" }
      },
      "required": ["startAmount"]
    },

    "account": {
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" },
        "balance": { "type": "number" },
        "parentId": { "anyOf": [{ "type": "string" }, { "type": "null"}], "description": "Referencia opcional a otra account.id (parentId)" },
        "icon": { "type": ["string","null"] },
        "type": { "type": ["string","null"] }
      },
      "required": ["id", "name", "balance"]
    },

    "transaction": {
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "type": { "type": "string", "enum": ["expense", "transfer", "income"] },
        "date": { "type": ["string","object"], "description": "Fecha de la transacción. Se recomienda usar tipo Date al manipular en memoria; almacenado como ISO-string en persistencia." },
        "amount": { "type": "number" },
        "description": { "type": "string" },
        "account": { "type": "string", "description": "References account.id" }
      },
      "required": ["id", "type", "date", "amount", "account"]
    }
  },

  "root": {
    "type": "object",
      "properties": {
      "budget": { "$ref": "#/entities/budget" },
      "accounts": { "type": "array", "items": { "$ref": "#/entities/account" } },
      "transactions": { "type": "array", "items": { "$ref": "#/entities/transaction" } },
      "dailyAllowance": { "type": "number" },
      "remainingToday": { "type": "number" },
      "progress": { "type": "number" },
      "lastCheckedDay": { "type": ["string", "object", "null"], "description": "Fecha del último chequeo; en memoria usar Date, en persistencia ISO-string." },
      "isSetup": { "type": "boolean" }
    },
    "required": ["accounts", "transactions", "isSetup"]
  }
}
